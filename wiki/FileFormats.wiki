#summary Description of various file formats related with translation

== Directory Structure ==

MESS/: texts and fonts, japanese version

LANG/ENG/MESS: texts and fonts, english version

Files inside MESS/ are almost the same, between PAL and NTSC-J version of the game, except one file "GPMESS_DATA.STR".

== .BRFNT file ==

=== RFNT Header ===

10h bytes

0000: 'RFNT'

0004: FE FF 01 04

0008: DWORD length of whole file

000C: WORD ??

000E: WORD ??

=== FINF Header ===

20h bytes

=== TGLP Header ===

30h bytes

0000: 'TGLP'

0004: DWORD length of 'TGLP' section

0008: BYTE char width (?)

0009: BYTE char height (?)

000A: BYTE ??

000B: BYTE ??

000C: DWORD length of 1 image

0010: WORD ??

0012: WORD ??

0014: WORD characters per row

0016: WORD characters per column

0018: WORD width of image

001A: WORD height of image

001C: DWORD position of data

=== TGLP Data ===

Bitmap is formed in a Zig-zag way.


A single block of bitmap looks like this:

00 01 02 03 04 05 06 07

08 09 0A 0B 0C 0D 0E 0F

10 11 12 13 14 15 16 17

18 19 1A 1B 1C 1D 1E 1F


Multiple blocks:

B01 B02 B03 ... B08 (assume width=64)

B09 B0A B0B ...

...


Multiple images:

I01

I02

I03

...

=== CWDH Section ===

0000: 'CWDH'

0004: DWORD length of this section

0008: DWORD last character ? (= character count - 1)

000C: DWORD first character ? (= 0)

0010: character count * (

  BYTE space width ?

  BYTE character width

  BYTE smaller than character width )

????: 00 00 00

=== CMAP Section ===

Type 1 :

0000: ‘CMAP’

0004: DWORD length of this section

0008: WORD UTF-16 code of first char

000A: WORD UTF-16 code of last char

000C: DWORD 0 ?

0010: DWORD position of next CMAP + 8

0014: WORD offset of first char

0016: WORD ?

Type 2 :

0000: ‘CMAP’

0004: DWORD length of this section

0008: WORD 0

000A: WORD -1

000C: 00 02 00 00  ?

0010: DWORD position of next CMAP + 8 (0 if no next)

0014: WORD characters in this table (tbl_char count)

0016: tbl_char count * (

  WORD UTF-16 code of char

  WORD offset of char )

????: WORD 0

== .BMG file ==

Texts are stored with UTF-8 encoding.

== .MESS file ==

Texts are stored with UTF-8 encoding.